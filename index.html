<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lottery</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Oswald:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Source+Sans+3:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
  <!-- Ambient Background Effects -->
  <div class="ambient-bg">
    <div class="ambient-bg__glow ambient-bg__glow--1"></div>
    <div class="ambient-bg__glow ambient-bg__glow--2"></div>
    <div class="ambient-bg__particles" id="particles"></div>
  </div>

  <div class="app">
    <!-- Header -->
    <header class="header">
      <h1 class="header__title" data-i18n="title">Lottery</h1>
    </header>

    <!-- Main Content -->
    <main class="main">
      <!-- Prize Badge -->
      <div class="prize-badge" id="prizeBadge">
        <span class="prize-badge__number">3</span>
      </div>

      <!-- Winner Name Display -->
      <h2 class="winner-name" id="winnerName" data-i18n="pressToStart">Nhan nut Quay so de bat dau</h2>

      <!-- Slot Machine -->
      <div class="slot-machine" id="slotMachine">
        <div class="slot-machine__spotlight"></div>
        <div class="slot-machine__frame">
          <div class="slot-machine__inner">
            <div class="slot-machine__reels" id="reels">
              <!-- 6 reels will be generated by JS -->
            </div>
          </div>
          <div class="slot-machine__reflection"></div>
        </div>
        <div class="slot-machine__base"></div>
      </div>

      <!-- Prize Selector -->
      <div class="prize-selector" id="prizeSelector">
        <button class="prize-selector__btn" id="prizeSelectorBtn">
          <span id="currentPrizeName">...</span>
          <span class="prize-selector__arrow">&#9658;</span>
        </button>
        <div class="prize-selector__dropdown" id="prizeDropdown" hidden>
          <!-- Prize options will be generated by JS -->
        </div>
      </div>

      <!-- Action Buttons -->
      <div class="action-buttons" id="actionButtons">
        <button class="btn btn--primary btn--spin" id="spinBtn" data-i18n="spin">QUAY SO</button>
      </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
      <nav class="footer__nav">
        <button class="footer__nav-item" id="resultsBtn">
          <span class="footer__nav-icon">&#9776;</span>
          <span data-i18n="results">Ket qua</span>
        </button>
        <button class="footer__nav-item" id="helpBtn">
          <span class="footer__nav-icon">&#9744;</span>
          <span data-i18n="guide">Huong dan</span>
        </button>
        <button class="footer__nav-item" id="adminBtn">
          <span class="footer__nav-icon">&#9881;</span>
          <span data-i18n="admin">Quan ly</span>
        </button>
      </nav>
      <div class="footer__actions">
        <button class="footer__icon-btn" id="audioToggle" title="Toggle sounds">
          <span>üîä</span>
        </button>
        <button class="footer__icon-btn" id="musicToggle" title="Toggle music">
          <span>üéµ</span>
        </button>
        <button class="footer__icon-btn" id="langToggle" title="EN/VI">
          <span>üåê</span>
        </button>
      </div>
    </footer>

    <!-- Results Modal -->
    <div class="modal" id="resultsModal" hidden>
      <div class="modal__content modal__content--results">
        <div class="modal__header modal__header--yellow">
          <h3 data-i18n="drawResults">Ket qua quay so may man</h3>
          <button class="modal__close" id="resultsModalClose">&times;</button>
        </div>
        <div class="modal__body">
          <!-- Prize Tabs -->
          <div class="tabs" id="prizeTabs">
            <!-- Tabs generated by JS -->
          </div>
          <!-- Winners Table -->
          <div class="winners-table-container" id="winnersTableContainer">
            <h4 id="sessionTitle">Phien quay thuong 1</h4>
            <table class="winners-table">
              <thead>
                <tr>
                  <th>#</th>
                  <th>ID</th>
                  <th data-i18n="fullName">Ho ten</th>
                </tr>
              </thead>
              <tbody id="winnersTableBody">
                <!-- Winners rows generated by JS -->
              </tbody>
            </table>
          </div>
          <button class="btn btn--download" id="downloadResultsBtn">
            <span>&#8681;</span>
            <strong data-i18n="download">Download</strong>
          </button>
        </div>
      </div>
    </div>

    <!-- Admin Modal -->
    <div class="modal" id="adminModal" hidden>
      <div class="modal__content">
        <div class="modal__header">
          <h3 data-i18n="admin">Quan ly</h3>
          <button class="modal__close" id="adminModalClose">&times;</button>
        </div>
        <div class="modal__body">
          <div class="admin-section">
            <h4 data-i18n="importData">Nhap du lieu</h4>
            <div class="admin-buttons">
              <label class="btn btn--secondary">
                <span data-i18n="importParticipants">Nhap nguoi tham gia</span>
                <input type="file" id="importParticipants" accept=".csv" hidden>
              </label>
              <label class="btn btn--secondary">
                <span data-i18n="importPrizes">Nhap giai thuong</span>
                <input type="file" id="importPrizes" accept=".csv" hidden>
              </label>
            </div>
          </div>
          <div class="admin-section">
            <h4 data-i18n="actions">Actions</h4>
            <div class="admin-buttons">
              <button class="btn btn--secondary" id="undoBtn" data-i18n="undo">Hoan tac</button>
              <button class="btn btn--secondary" id="exportBtn" data-i18n="export">Xuat ket qua</button>
              <button class="btn btn--danger" id="resetBtn" data-i18n="reset">Dat lai</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Help Modal -->
    <div class="modal" id="helpModal" hidden>
      <div class="modal__content">
        <div class="modal__header">
          <h3 data-i18n="guide">Huong dan</h3>
          <button class="modal__close" id="helpModalClose">&times;</button>
        </div>
        <div class="modal__body">
          <div class="help-content">
            <h4 data-i18n="helpPrepare">1. Chuan bi du lieu</h4>
            <p data-i18n="helpPrepareDesc">Tao file JSON voi danh sach nguoi tham gia (id, name) va giai thuong.</p>

            <h4 data-i18n="helpSpin">2. Quay so</h4>
            <p data-i18n="helpSpinDesc">Nhan nut "QUAY SO" hoac phim Space de bat dau quay.</p>

            <h4 data-i18n="helpConfirm">3. Chot ket qua</h4>
            <p data-i18n="helpConfirmDesc">Nhan "CHOT" de dung, sau do "XAC NHAN" de luu hoac "QUAY LAI" de quay lai.</p>

            <h4 data-i18n="helpView">4. Xem ket qua</h4>
            <p data-i18n="helpViewDesc">Nhan "Ket qua" o footer de xem danh sach nguoi trung giai.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Confetti Canvas -->
  <canvas id="confettiCanvas"></canvas>

  <!-- Scripts -->
  <script type="module" src="js/app.js"></script>
</body>
</html>
